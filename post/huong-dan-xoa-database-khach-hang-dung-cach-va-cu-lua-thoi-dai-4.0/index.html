<!DOCTYPE html>
<html lang="vi">
  <head>
    
    <script type="application/ld+json">

{  
  "@context":"http://schema.org",
  "@type":"Website",
  "@id":"https:\/\/manhnv.com\/",
  "author": {
    "@type": "Person",
    "name": "Manh NV",
    
    "image": "https://manhnv.com/favicon.png"
    
  },
  "name":"Chia sẻ là niềm vui",
  "description":"Hướng dẫn xóa database khách hàng đúng cách! Xin chào! Lại là mình đây, và mình là một thằng đi code thuê thôi :D Hôm nay mình sẽ viết về một chủ đề khá là hay, khá là kiểu giật tít như tiêu đề đấy. Không phải các bạn đọc nhầm đâu nhé.\nNào bắt đầu thôi.\nGiới thiệu Bạn là lập trình viên? hoặc có thể là ai đó khác nhưng có động tới database, thì điều đầu tiên sợ nhất là một ngày nọ bạn nghịch ngu và xóa luôn database.",
  "url":"https:\/\/manhnv.com\/post\/huong-dan-xoa-database-khach-hang-dung-cach-va-cu-lua-thoi-dai-4.0\/",
  "keywords":"[, manhnv, development, cyber security, hacker, CTF, CTF writeup]"
}

</script>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.95.0 with theme Tranquilpeak 0.5.3-BETA">
<meta name="author" content="Manh NV">
<meta name="keywords" content=", manhnv, development, cyber security, hacker, CTF, CTF writeup">
<meta name="description" content="Hướng dẫn xóa database khách hàng đúng cách! Xin chào! Lại là mình đây, và mình là một thằng đi code thuê thôi :D Hôm nay mình sẽ viết về một chủ đề khá là hay, khá là kiểu giật tít như tiêu đề đấy. Không phải các bạn đọc nhầm đâu nhé.
Nào bắt đầu thôi.
Giới thiệu Bạn là lập trình viên? hoặc có thể là ai đó khác nhưng có động tới database, thì điều đầu tiên sợ nhất là một ngày nọ bạn nghịch ngu và xóa luôn database.">


<meta property="og:description" content="Hướng dẫn xóa database khách hàng đúng cách! Xin chào! Lại là mình đây, và mình là một thằng đi code thuê thôi :D Hôm nay mình sẽ viết về một chủ đề khá là hay, khá là kiểu giật tít như tiêu đề đấy. Không phải các bạn đọc nhầm đâu nhé.
Nào bắt đầu thôi.
Giới thiệu Bạn là lập trình viên? hoặc có thể là ai đó khác nhưng có động tới database, thì điều đầu tiên sợ nhất là một ngày nọ bạn nghịch ngu và xóa luôn database.">
<meta property="og:type" content="article">
<meta property="og:title" content="Hướng dẫn xóa database khách hàng đúng cách! và cú lừa thời đại 4.0">
<meta name="twitter:title" content="Hướng dẫn xóa database khách hàng đúng cách! và cú lừa thời đại 4.0">
<meta property="og:url" content="https://manhnv.com/post/huong-dan-xoa-database-khach-hang-dung-cach-va-cu-lua-thoi-dai-4.0/">
<meta property="twitter:url" content="https://manhnv.com/post/huong-dan-xoa-database-khach-hang-dung-cach-va-cu-lua-thoi-dai-4.0/">
<meta property="og:site_name" content="Chia sẻ là niềm vui">
<meta property="og:description" content="Hướng dẫn xóa database khách hàng đúng cách! Xin chào! Lại là mình đây, và mình là một thằng đi code thuê thôi :D Hôm nay mình sẽ viết về một chủ đề khá là hay, khá là kiểu giật tít như tiêu đề đấy. Không phải các bạn đọc nhầm đâu nhé.
Nào bắt đầu thôi.
Giới thiệu Bạn là lập trình viên? hoặc có thể là ai đó khác nhưng có động tới database, thì điều đầu tiên sợ nhất là một ngày nọ bạn nghịch ngu và xóa luôn database.">
<meta name="twitter:description" content="Hướng dẫn xóa database khách hàng đúng cách! Xin chào! Lại là mình đây, và mình là một thằng đi code thuê thôi :D Hôm nay mình sẽ viết về một chủ đề khá là hay, khá là kiểu giật tít như tiêu đề đấy. Không phải các bạn đọc nhầm đâu nhé.
Nào bắt đầu thôi.
Giới thiệu Bạn là lập trình viên? hoặc có thể là ai đó khác nhưng có động tới database, thì điều đầu tiên sợ nhất là một ngày nọ bạn nghịch ngu và xóa luôn database.">
<meta property="og:locale" content="vi">

  
    <meta property="article:published_time" content="2019-03-29T00:00:00">
  
  
    <meta property="article:modified_time" content="2019-03-29T00:00:00">
  
  
  
    
      <meta property="article:section" content="python tools">
    
  
  
    
      <meta property="article:tag" content="python">
    
  


<meta name="twitter:card" content="summary">







  <meta property="og:image" content="https://manhnv.com/favicon.png">
  <meta property="twitter:image" content="https://manhnv.com/favicon.png">





  <meta property="og:image" content="//d1u9biwaxjngwg.cloudfront.net/elements-showcase/vintage-140.jpg">
  <meta property="twitter:image" content="//d1u9biwaxjngwg.cloudfront.net/elements-showcase/vintage-140.jpg">


    <title>Hướng dẫn xóa database khách hàng đúng cách! và cú lừa thời đại 4.0</title>

    <link rel="icon" href="https://manhnv.com/favicon.png">
    

    

    <link rel="canonical" href="https://manhnv.com/post/huong-dan-xoa-database-khach-hang-dung-cach-va-cu-lua-thoi-dai-4.0/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    
    
    <link rel="stylesheet" href="https://manhnv.com/css/style-h6ccsoet3mzkbb0wngshlfbaweimexgqcxj0h5hu4h82olsdzz6wmqdkajm.min.css" />
    
    
      
        <link rel="stylesheet"  href="https://manhnv.com/css/mystyle.css">
      
    

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-128983514-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="5">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://manhnv.com/" aria-label="Tới trang chủ">Chia sẻ là niềm vui</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://manhnv.com/#about" aria-label="Mở liên kết: /#about">
    
    
    
      
        <img class="header-picture" src="https://manhnv.com/favicon.png" alt="Ảnh đại diện" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="5">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://manhnv.com/#about" aria-label="Tìm hiểu thêm về tác giả">
          <img class="sidebar-profile-picture" src="https://manhnv.com/favicon.png" alt="Ảnh đại diện" />
        </a>
        <h4 class="sidebar-profile-name">Manh NV</h4>
        
          <h5 class="sidebar-profile-bio">Chia sẻ là niềm vui</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://manhnv.com/donate.html" title="Donate">
    
      <i class="sidebar-button-icon fa fa-usd"></i>
      
      <span class="sidebar-button-desc">Donate</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://manhnv.com/" title="Home">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Trang chủ</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://manhnv.com/categories" title="Categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Danh mục</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://manhnv.com/tags" title="Tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Thẻ thông tin</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://manhnv.com/archives" title="Archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Lưu trữ</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://manhnv.com/#about" title="About">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">Thông tin</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://manhnv.com/copyrights" title="Copyrights">
    
      <i class="sidebar-button-icon fa fa-lg fa-copyright"></i>
      
      <span class="sidebar-button-desc">Copyrights</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/nguyenmanh1997" target="_blank" rel="noopener" title="GitHub">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://facebook.com/manhnv.sec" target="_blank" rel="noopener" title="Facebook">
    
      <i class="sidebar-button-icon fa fa-lg fa-facebook"></i>
      
      <span class="sidebar-button-desc">Facebook</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.youtube.com/channel/UCEY3DBfSDupbSG96jfcSDwQ?sub_confirmation=1" target="_blank" rel="noopener" title="Youtube">
    
      <i class="sidebar-button-icon fa fa-lg fa-youtube"></i>
      
      <span class="sidebar-button-desc">Youtube</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="5"
        class="
               hasCoverMetaIn
               ">
        <article class="post" id="top">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title">
      Hướng dẫn xóa database khách hàng đúng cách! và cú lừa thời đại 4.0
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2019-03-29T00:00:00Z">
        
  tháng 3 29, 2019

      </time>
    
    
  
  
    <span>mục</span>
    
      <a class="category-link" href="https://manhnv.com/categories/python-tools">python tools</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              <h1 id="hướng-dẫn-xóa-database-khách-hàng-đúng-cách">Hướng dẫn xóa database khách hàng đúng cách!</h1>
<p>Xin chào! Lại là mình đây, và mình là một thằng đi code thuê thôi :D
Hôm nay mình sẽ viết về một chủ đề khá là hay, khá là kiểu giật tít như tiêu đề đấy. Không phải các bạn đọc nhầm đâu nhé.</p>
<p>Nào bắt đầu thôi.</p>
<h2 id="giới-thiệu">Giới thiệu</h2>
<p>Bạn là lập trình viên? hoặc có thể là ai đó khác nhưng có động tới database, thì điều đầu tiên sợ nhất là một ngày nọ bạn nghịch ngu và xóa luôn database. Dẫ n  đến việc sếp mắng, công ty đuổi việc, đồng nghiệp cùng team bị vạ lây ( đó là mình đang nói nếu các bạn ngu đến nỗi xóa database khách hàng thật :3 ). Còn trong bài này mình không hướng dẫn các bạn nghịch ngu như thế đâu, yên tâm đi.</p>
<p>Bài này của mình sẽ hướng dẫn các bạn code ra một &rsquo;tool&rsquo;, nói là &rsquo;tool&rsquo; nghe to tát vl. Thực ra là hướng dẫn viết mấy dòng code để backup database ( phạm vi bài viết chỉ hướng dẫn backup MYSQL các bạn nhé ) cho thuận tiện, thế nhé.</p>
<p>Tiêu đề là mình giật tít đấy :3!</p>
<h2 id="demo">Demo</h2>
<p><a href="https://www.youtube.com/watch?v=TvaxWhRdVBI"><img src="https://img.youtube.com/vi/TvaxWhRdVBI/0.jpg" alt="Demo"></a></p>
<h2 id="bắt-đầu">Bắt đầu</h2>
<p>Thì với mình là một thằng code Python nên trong bài viết này mình xin được phép sẽ dùng Python để múa rìu qua mắt thợ.</p>
<ul>
<li>
<p>Chuẩn bị: <code>Những thứ chuẩn bị ở đây anh/em code python chắc chắn biết cài rồi nên mình chỉ liệt kê mà không hưóng dẫn nữa nhé</code></p>
<ul>
<li>
<p>Python 3.6</p>
</li>
<li>
<p>Cài đặt thư viện fbchat và requests:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pip install PyMySQL python-dotenv
</span></span></code></pre></div></li>
<li>
<p><strong>Tạo file <code>main.py</code></strong>: Đây là file mình sẽ code chương trình chính.</p>
</li>
<li>
<p><strong>Tạo file <code>backup.py</code></strong>: Đây là file viết code về phần backup database.</p>
</li>
<li>
<p><strong>Tạo file <code>libs.py</code></strong>: Đây là file mình sẽ code mình code cái gì cần râu ria cho project, ví dụ ở dây mình code phần gửi mail.</p>
</li>
<li>
<p><strong>Tạo file <code>.env</code></strong>: Đây là file đặt các biến môi trường.</p>
</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/7GtPxfH68M6tL2qu4iTqTWz9AFopoj7R4m6fVFbx_7HypLZjMqp0q0mzib1WakHEy_oLTmgxK5jKH5-aHZHaPCCiMG77uN3clshd3g9MC2mSFKYrM-SUxhb3Kd8ccMeJz_jQqQeUVKfzzUULvz8h8MPBWAD8eUTDKwHHqZAid73xA9urprxvEd8682EEmrXbsc-mRw5wzue6CUHDZ5uoYD5I59ov6cVKuXVlsv45uL6ldO_NADXd-eicfA6RqC5O6X9HGfZ9bHzpnT_-4X6LASGR53jzAGbg_MdLR5GWCEVYtI10NfCXILnegEJx97-I8lFyN8uKlBg0GELdAZMumIAh7GZJiTxFaBYZMN2yJ2NBPv3bCQiEGJfmoKtHTsyccFQ6TWGgBqF_Olrjcd3B1N8oWHsrlYnjf6lI_vOHmiI31MkQs59TSxZqKmjvVbF-VibYLgcR_C9pyHXyKHmZ9FF8bZT1WwhUgLamxM28qYE9rLG7PUYyKjGnQF6cw1b3-gLdvv7K1xZYPtOoo7fsMJGVkjm1i1bJqHqP-TBGd8Mpo5_7mYJ5n2S3iOqrz57FiupDe9h2wPMi88sA5qvxwQ90vrkgG55dU4Oan9tmHnoZ1BLiwov_74OiNEy0Nk1R1XTRzBUWS-5MviRm2f9MxBK82IWNxbc=w345-h304-no" alt="alt text" title="Folder"></p>
</li>
</ul>
<h2 id="triển-khai-code">Triển khai code</h2>
<ul>
<li>Nội dung file <code>.env</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-env" data-lang="env"><span style="display:flex;"><span><span style="color:#75715e">#Config Mail</span>
</span></span><span style="display:flex;"><span>SMTP_SERVER<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;smtp.gmail.com&#34;</span>
</span></span><span style="display:flex;"><span>SMTP_PORT<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;465&#34;</span>
</span></span><span style="display:flex;"><span>SSL_TLS<span style="color:#f92672">=</span>ssl
</span></span><span style="display:flex;"><span>FROM_MAIL<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>MAIL_PASSWORD<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>MAIL_ENCRYPTION<span style="color:#f92672">=</span>ssl
</span></span><span style="display:flex;"><span>MAIL_RECEIVED<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>MAIL_SUBJECT<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Backup Databases&#34;</span>
</span></span><span style="display:flex;"><span>MAIL_MSG<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Databases đã được backup!&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#Config Database</span>
</span></span><span style="display:flex;"><span>DB_HOST<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;localhost&#34;</span>
</span></span><span style="display:flex;"><span>DB_USER<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>DB_PASSWORD<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#DB_BACKUP_NAME có nhiều db, giữa 2 db cách nhau 1 dấu ,</span>
</span></span><span style="display:flex;"><span>DB_BACKUP_NAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>
</span></span></code></pre></div><ul>
<li>Code <code>backup.py</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#!/usr/bin/python</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -*- coding: utf-8 -*-</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> os
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> time
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> pymysql <span style="color:#66d9ef">as</span> MySQLdb
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">backup_mysql</span>(user<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>, password<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>, host<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>, db_name<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Một số biến cần dùng cho việc xử lý bên dưới</span>
</span></span><span style="display:flex;"><span>    list_bk <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    dbs_systems <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;information_schema&#39;</span>, <span style="color:#e6db74">&#39;sys&#39;</span>, <span style="color:#e6db74">&#39;performance_schema&#39;</span>, <span style="color:#e6db74">&#39;mysql&#39;</span>]
</span></span><span style="display:flex;"><span>    list_db_name <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> db_name:
</span></span><span style="display:flex;"><span>        list_db_name <span style="color:#f92672">=</span> db_name<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;,&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Cụm này chỉ là connect tới database lấy đống database vào biến results rồi đóng nó lại thôi nhé</span>
</span></span><span style="display:flex;"><span>    conn <span style="color:#f92672">=</span> MySQLdb<span style="color:#f92672">.</span>connect(host, user, password)
</span></span><span style="display:flex;"><span>    cursor <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span>cursor()
</span></span><span style="display:flex;"><span>    cursor<span style="color:#f92672">.</span>execute(<span style="color:#e6db74">&#34;SHOW DATABASES&#34;</span>)
</span></span><span style="display:flex;"><span>    results <span style="color:#f92672">=</span> cursor<span style="color:#f92672">.</span>fetchall()
</span></span><span style="display:flex;"><span>    cursor<span style="color:#f92672">.</span>close()
</span></span><span style="display:flex;"><span>    conn<span style="color:#f92672">.</span>close()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Lấy thời gian hiện tại chỉ là năm-tháng-ngày rồi tạo một folder để chứa filde backup</span>
</span></span><span style="display:flex;"><span>    timestamp <span style="color:#f92672">=</span> time<span style="color:#f92672">.</span>strftime(<span style="color:#e6db74">&#39;%Y-%m-</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">&#39;</span>)
</span></span><span style="display:flex;"><span>    backup_folder <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;BK_</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">.</span>format(timestamp)
</span></span><span style="display:flex;"><span>    cmd_folder <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;mkdir -p </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">.</span>format(backup_folder)
</span></span><span style="display:flex;"><span>    os<span style="color:#f92672">.</span>system(cmd_folder)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Đoạn code backup dữ liệu chính</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> result <span style="color:#f92672">in</span> results:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> db_name:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Nếu muốn backup theo tên một số database cụ thể</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> result[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">in</span> list_db_name:
</span></span><span style="display:flex;"><span>                backup_file_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">_</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">.sql.gz&#39;</span><span style="color:#f92672">.</span>format(result[<span style="color:#ae81ff">0</span>], timestamp)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                cmd_echo <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;echo &#39;Backup </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> database to </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#39;&#34;</span><span style="color:#f92672">.</span>format(result[<span style="color:#ae81ff">0</span>], backup_file_name)
</span></span><span style="display:flex;"><span>                os<span style="color:#f92672">.</span>system(cmd_echo)
</span></span><span style="display:flex;"><span>                cmd_dump <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;mysqldump -u </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> -h </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> -p</span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> | gzip -9 --rsyncable &gt; ./</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">.</span>format(
</span></span><span style="display:flex;"><span>                    user,
</span></span><span style="display:flex;"><span>                    host,
</span></span><span style="display:flex;"><span>                    password,
</span></span><span style="display:flex;"><span>                    result[<span style="color:#ae81ff">0</span>],
</span></span><span style="display:flex;"><span>                    backup_folder,
</span></span><span style="display:flex;"><span>                    backup_file_name
</span></span><span style="display:flex;"><span>                )
</span></span><span style="display:flex;"><span>                os<span style="color:#f92672">.</span>system(cmd_dump)
</span></span><span style="display:flex;"><span>                print(<span style="color:#e6db74">&#34;Backup </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(result[<span style="color:#ae81ff">0</span>]))
</span></span><span style="display:flex;"><span>                list_bk<span style="color:#f92672">.</span>append(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(backup_folder,backup_file_name))
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># Backup toàn bộ database nếu không truyền db_name vào</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> result[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> dbs_systems:
</span></span><span style="display:flex;"><span>                backup_file_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">_</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">.sql.gz&#39;</span><span style="color:#f92672">.</span>format(result[<span style="color:#ae81ff">0</span>], timestamp)
</span></span><span style="display:flex;"><span>                cmd_echo <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;echo &#39;Backup </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> database to </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#39;&#34;</span><span style="color:#f92672">.</span>format(result[<span style="color:#ae81ff">0</span>], backup_file_name)
</span></span><span style="display:flex;"><span>                os<span style="color:#f92672">.</span>system(cmd_echo)
</span></span><span style="display:flex;"><span>                cmd_dump <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;mysqldump -u </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> -h </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> -p</span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">{}</span><span style="color:#e6db74"> | gzip -9 --rsyncable &gt; ./</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">.</span>format(
</span></span><span style="display:flex;"><span>                    user,
</span></span><span style="display:flex;"><span>                    host,
</span></span><span style="display:flex;"><span>                    password,
</span></span><span style="display:flex;"><span>                    result[<span style="color:#ae81ff">0</span>],
</span></span><span style="display:flex;"><span>                    backup_folder,
</span></span><span style="display:flex;"><span>                    backup_file_name
</span></span><span style="display:flex;"><span>                )
</span></span><span style="display:flex;"><span>                os<span style="color:#f92672">.</span>system(cmd_dump)
</span></span><span style="display:flex;"><span>                print(<span style="color:#e6db74">&#34;Đã backup </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(result[<span style="color:#ae81ff">0</span>]))
</span></span><span style="display:flex;"><span>                list_bk<span style="color:#f92672">.</span>append(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(backup_folder,backup_file_name))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> timestamp, list_bk
</span></span></code></pre></div><ul>
<li>Code <code>libs.py</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e">#!/usr/bin/python</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -*- coding: utf-8 -*-</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> os
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> smtplib
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> email.mime.multipart <span style="color:#f92672">import</span> MIMEMultipart
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> email.mime.text <span style="color:#f92672">import</span> MIMEText
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> email.mime.base <span style="color:#f92672">import</span> MIMEBase
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> email.utils <span style="color:#f92672">import</span> formatdate
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> email <span style="color:#f92672">import</span> encoders
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> dotenv <span style="color:#f92672">import</span> load_dotenv
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>load_dotenv()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">create_mail</span>(mail_received, subject, text, attachs:list <span style="color:#f92672">=</span> <span style="color:#66d9ef">None</span>):
</span></span><span style="display:flex;"><span>    msg <span style="color:#f92672">=</span> MIMEMultipart()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    msg[<span style="color:#e6db74">&#39;Subject&#39;</span>] <span style="color:#f92672">=</span> subject
</span></span><span style="display:flex;"><span>    msg[<span style="color:#e6db74">&#39;From&#39;</span>] <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;FROM_MAIL&#39;</span>)
</span></span><span style="display:flex;"><span>    msg[<span style="color:#e6db74">&#39;To&#39;</span>] <span style="color:#f92672">=</span> mail_received
</span></span><span style="display:flex;"><span>    msg[<span style="color:#e6db74">&#39;Date&#39;</span>] <span style="color:#f92672">=</span> formatdate()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    msg<span style="color:#f92672">.</span>attach(MIMEText(text, <span style="color:#e6db74">&#39;plain&#39;</span>, <span style="color:#e6db74">&#39;utf-8&#39;</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> attachs:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> attach <span style="color:#f92672">in</span> attachs:
</span></span><span style="display:flex;"><span>            part <span style="color:#f92672">=</span> MIMEBase(<span style="color:#e6db74">&#39;application&#39;</span>, <span style="color:#e6db74">&#39;octet-stream&#39;</span>)
</span></span><span style="display:flex;"><span>            part<span style="color:#f92672">.</span>set_payload(open(attach, <span style="color:#e6db74">&#39;rb&#39;</span>)<span style="color:#f92672">.</span>read())
</span></span><span style="display:flex;"><span>            encoders<span style="color:#f92672">.</span>encode_base64(part)
</span></span><span style="display:flex;"><span>            part<span style="color:#f92672">.</span>add_header(<span style="color:#e6db74">&#39;Content-Disposition&#39;</span>,<span style="color:#e6db74">&#39;attachment&#39;</span>, filename<span style="color:#f92672">=</span>os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>basename(attach))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            msg<span style="color:#f92672">.</span>attach(part)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> msg
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">send_mail</span>(mail_received, msg) <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">None</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;MAIL_ENCRYPTION&#39;</span>) <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;ssl&#39;</span>:
</span></span><span style="display:flex;"><span>        smtp_server <span style="color:#f92672">=</span> smtplib<span style="color:#f92672">.</span>SMTP_SSL(os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;SMTP_SERVER&#39;</span>), os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;SMTP_PORT&#39;</span>))
</span></span><span style="display:flex;"><span>        smtp_server<span style="color:#f92672">.</span>login(os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;FROM_MAIL&#39;</span>), os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;MAIL_PASSWORD&#39;</span>))
</span></span><span style="display:flex;"><span>        smtp_server<span style="color:#f92672">.</span>sendmail(os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;FROM_MAIL&#39;</span>), mail_received, msg<span style="color:#f92672">.</span>as_string())
</span></span><span style="display:flex;"><span>        smtp_server<span style="color:#f92672">.</span>close()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        smtp_server <span style="color:#f92672">=</span> smtplib<span style="color:#f92672">.</span>SMTP(os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;SMTP_SERVER&#39;</span>), os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;SMTP_PORT&#39;</span>))
</span></span><span style="display:flex;"><span>        smtp_server<span style="color:#f92672">.</span>login(os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;FROM_MAIL&#39;</span>), os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;MAIL_PASSWORD&#39;</span>))
</span></span><span style="display:flex;"><span>        smtp_server<span style="color:#f92672">.</span>sendmail(os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;FROM_MAIL&#39;</span>), mail_received, msg<span style="color:#f92672">.</span>as_string())
</span></span><span style="display:flex;"><span>        smtp_server<span style="color:#f92672">.</span>close()
</span></span></code></pre></div><ul>
<li>Code <code>main.py</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span><span style="color:#75715e">#!/usr/bin/python</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -*- coding: utf-8 -*-</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> os
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> dotenv <span style="color:#f92672">import</span> load_dotenv
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> backup <span style="color:#f92672">import</span> backup_mysql
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> libs <span style="color:#f92672">import</span> create_mail, send_mail
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>load_dotenv()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    timestamp, bks <span style="color:#f92672">=</span> backup_mysql(
</span></span><span style="display:flex;"><span>        user<span style="color:#f92672">=</span>os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;DB_USER&#39;</span>),
</span></span><span style="display:flex;"><span>        password<span style="color:#f92672">=</span>os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;DB_PASSWORD&#39;</span>),
</span></span><span style="display:flex;"><span>        host<span style="color:#f92672">=</span>os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;DB_HOST&#39;</span>),
</span></span><span style="display:flex;"><span>        db_name<span style="color:#f92672">=</span>os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;DB_BACKUP_NAME&#39;</span>)
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> bks:
</span></span><span style="display:flex;"><span>        msg <span style="color:#f92672">=</span> create_mail(
</span></span><span style="display:flex;"><span>            mail_received<span style="color:#f92672">=</span>os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;MAIL_RECEIVED&#39;</span>),
</span></span><span style="display:flex;"><span>            subject<span style="color:#f92672">=</span>os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;MAIL_SUBJECT&#39;</span>),
</span></span><span style="display:flex;"><span>            text<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">:</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#34;</span><span style="color:#f92672">.</span>format(timestamp, os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;MAIL_MSG&#39;</span>)),
</span></span><span style="display:flex;"><span>            attachs<span style="color:#f92672">=</span>bks
</span></span><span style="display:flex;"><span>        )
</span></span><span style="display:flex;"><span>        send_mail(mail_received<span style="color:#f92672">=</span>os<span style="color:#f92672">.</span>getenv(<span style="color:#e6db74">&#39;MAIL_RECEIVED&#39;</span>), msg<span style="color:#f92672">=</span>msg)
</span></span></code></pre></div><h2 id="giải-thích-code">Giải thích code</h2>
<ul>
<li>
<p>File <code>.env</code> là file cấu hình các biến môi trường. Có một số cái các bạn cầu chú ý:</p>
<ul>
<li><code>FROM_MAIL</code>: Là mail các bạn dùng để gửi đi.</li>
<li><code>MAIL_PASSWORD</code>: Là mật khẩu mail gửi đi. Mình dùng gmail nên cần phải vào trang này để tạo mật khẩu ứng dụng <a href="https://support.google.com/accounts/answer/185833?hl=vi">https://support.google.com/accounts/answer/185833?hl=vi</a></li>
<li><code>MAIL_RECEIVED</code>: Mail nhận file backup</li>
<li><code>DB_HOST</code>: Tên của host database cần connect tới để backup.</li>
<li><code>DB_USER</code>: Username để connect tới database.</li>
<li><code>DB_PASSWORD</code>: Mật khẩu để connect database.</li>
<li><code>DB_BACKUP_NAME</code>: Danh sách database bạn cần backup, giữa các database ngăn cách nhau bằng dấu <code>,</code>. Nếu để trống thì sẽ backup toàn bộ database nhé.</li>
</ul>
</li>
<li>
<p>File <code>backup.py</code> cần chú ý:</p>
<ul>
<li>Biến <code>dbs_systems</code> là danh sách mấy cái db của mysql sinh ra nên không cần quan tâm mình vứt vào để loại nó ra trong quá trình backup.</li>
<li>Biến <code>list_bk</code> mình dùng để lưu lại danh sách database đã được backup thôi, anh em đọc code chắc là hiểu.</li>
<li>Biến <code>list_db_name</code> là danh sách database muốn backup.</li>
<li>Logic của nó đơn giản là: Connect tới host chứa database, xong lấy hết database có trong đó vứt vào biết <code>results</code> xong chạy 1 vòng <code>for</code> để duyệt được hết <code>results</code>, mỗi lần duyệt thì check xem tên của database đang duyệt tới đó có nằm trong danh sách mà đống tên <code>db_name</code> mà mình muốn lấy không? nếu có thì nhảy vào backup từng cái một. Nếu không thì backup toàn bộ database. Cuối cùng là trả về thời gian backup và danh sách đường dẫn file đã backup.</li>
</ul>
</li>
<li>
<p>File <code>libs.py</code> cần chú ý:</p>
<ul>
<li>Nó là cái gửi mail cơ bản trong python thôi nên là cũng không có gì chú ý mấy. Trừ việc biến <code>attachs</code> là danh sách đường dẫn của file backup thôi :D</li>
</ul>
</li>
<li>
<p>File <code>main.py</code> cần chú ý:</p>
<ul>
<li>File này cũng không cần chú ý nhiều, nó chỉ là gọi 2 file kia ra và dùng hàm trong đó thôi</li>
</ul>
</li>
</ul>
<h2 id="chạy-code">Chạy code</h2>
<p>Bây giờ bạn chỉ việc điền hết cấu hình vào file <code>.env</code> và chạy:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>python main.py
</span></span></code></pre></div><h2 id="kết-quả">Kết quả</h2>
<ul>
<li>Source code: <a href="https://github.com/nguyenmanh1997/backup-database-python">https://github.com/nguyenmanh1997/backup-database-python</a></li>
<li>Sau khi làm các bước như của mình viết ở trên thì chúng ta đã có một mớ hộn độn code dùng để backup database kiểu xịn sò.</li>
<li>Các bạn có thể viết cấu hình cron job cho nó chạy mỗi ngày 1 lần backup database.</li>
</ul>
<p>==&gt; Chúc các bạn thành công!</p>
<h2 id="bài-học-rút-ra">Bài học rút ra</h2>
<ul>
<li>Tiêu đề chỉ mang tính chất xào lòng là chính</li>
<li>Đừng bao giờ xóa database của khách hàng!</li>
<li>Đọc một bài viết thì nên đọc nội dung, đừng nên chỉ đọc mỗi tiêu đề.</li>
</ul>

              


            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">THẺ ĐÁNH DẤU</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://manhnv.com/tags/python/">python</a>

                  </div>
                
              
            
            
<div class="post-actions-wrap">
  <nav >
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://manhnv.com/post/su-dung-acunetix-web-vulnerability-scanner-de-danh-gia-phat-hien-diem-yeu-cua-ung-web/" data-tooltip="SỬ DỤNG ACUNETIX WEB VULNERABILITY SCANNER ĐỂ ĐÁNH GIÁ, PHÁT HIỆN ĐIỂM YẾU CỦA ỨNG DỤNG WEB" aria-label="Tiếp: SỬ DỤNG ACUNETIX WEB VULNERABILITY SCANNER ĐỂ ĐÁNH GIÁ, PHÁT HIỆN ĐIỂM YẾU CỦA ỨNG DỤNG WEB">
          
              <i class="fa fa-angle-left"></i>
              <span class="hide-xs hide-sm text-small icon-ml">Tiếp</span>
            </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://manhnv.com/post/khi-lap-trinh-vien-choi-facebook-bien-facebook-messenger-thanh-bot-tra-cuu-tu-vi/" data-tooltip="Khi lập trình viên chơi facebook - Biến Facebook messenger thành bot tra cứu tử vi " aria-label="Trước: Khi lập trình viên chơi facebook - Biến Facebook messenger thành bot tra cứu tử vi ">
          
              <span class="hide-xs hide-sm text-small icon-mr">Trước</span>
              <i class="fa fa-angle-right"></i>
            </a>
        </li>
      
    </ul>
  </nav>
<ul class="post-actions post-action-share" >
  
    <li class="post-action hide-lg hide-md hide-sm">
      <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Chia sẻ bài viết này">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </a>
    </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://manhnv.com/post/huong-dan-xoa-database-khach-hang-dung-cach-va-cu-lua-thoi-dai-4.0/" title="Chia sẻ với Facebook" aria-label="Chia sẻ với Facebook">
          <i class="fab fa-facebook-square" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://manhnv.com/post/huong-dan-xoa-database-khach-hang-dung-cach-va-cu-lua-thoi-dai-4.0/" title="Chia sẻ với Twitter" aria-label="Chia sẻ với Twitter">
          <i class="fab fa-twitter" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/sharing/share-offsite/?url=https://manhnv.com/post/huong-dan-xoa-database-khach-hang-dung-cach-va-cu-lua-thoi-dai-4.0/" title="Chia sẻ với Linkedin" aria-label="Chia sẻ với Linkedin">
          <i class="fab fa-linkedin" aria-hidden="true"></i>
        </a>
      </li>
    
  
  
    <li class="post-action">
      <a class="post-action-btn btn btn--default" href="#disqus_thread" aria-label="Để lại một bình luận">
        <i class="far fa-comment"></i>
      </a>
    </li>
  
  <li class="post-action">
    
      <a class="post-action-btn btn btn--default" href="#top" aria-label="Trở lại đầu trang">
      <i class="fa fa-arrow-up" aria-hidden="true"></i>
    
    </a>
  </li>
</ul>
</div>


            
  
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
    <script type="text/javascript">
      var disqus_config = function() {
        this.page.url = 'https:\/\/manhnv.com\/post\/huong-dan-xoa-database-khach-hang-dung-cach-va-cu-lua-thoi-dai-4.0\/';
        
          this.page.identifier = '\/post\/huong-dan-xoa-database-khach-hang-dung-cach-va-cu-lua-thoi-dai-4.0\/'
        
      };
      (function() {
        
        
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
          document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
          return;
        }
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var disqus_shortname = 'hugo-tranquilpeak-theme';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
  


          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2022 <a href="https://manhnv.com">Manhnv</a><a href="//www.dmca.com/Protection/Status.aspx?ID=26de1c55-21c3-4e09-9e8b-f7507ee02f5e" title="DMCA.com Protection Status" class="dmca-badge"> <img src ="https://images.dmca.com/Badges/dmca_protected_sml_120m.png?ID=26de1c55-21c3-4e09-9e8b-f7507ee02f5e"  alt="DMCA.com Protection Status" /></a>  <script src="https://images.dmca.com/Badges/DMCABadgeHelper.min.js"> </script>. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
        
<div class="post-actions-wrap">
  <nav >
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://manhnv.com/post/su-dung-acunetix-web-vulnerability-scanner-de-danh-gia-phat-hien-diem-yeu-cua-ung-web/" data-tooltip="SỬ DỤNG ACUNETIX WEB VULNERABILITY SCANNER ĐỂ ĐÁNH GIÁ, PHÁT HIỆN ĐIỂM YẾU CỦA ỨNG DỤNG WEB" aria-label="Tiếp: SỬ DỤNG ACUNETIX WEB VULNERABILITY SCANNER ĐỂ ĐÁNH GIÁ, PHÁT HIỆN ĐIỂM YẾU CỦA ỨNG DỤNG WEB">
          
              <i class="fa fa-angle-left"></i>
              <span class="hide-xs hide-sm text-small icon-ml">Tiếp</span>
            </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://manhnv.com/post/khi-lap-trinh-vien-choi-facebook-bien-facebook-messenger-thanh-bot-tra-cuu-tu-vi/" data-tooltip="Khi lập trình viên chơi facebook - Biến Facebook messenger thành bot tra cứu tử vi " aria-label="Trước: Khi lập trình viên chơi facebook - Biến Facebook messenger thành bot tra cứu tử vi ">
          
              <span class="hide-xs hide-sm text-small icon-mr">Trước</span>
              <i class="fa fa-angle-right"></i>
            </a>
        </li>
      
    </ul>
  </nav>
<ul class="post-actions post-action-share" >
  
    <li class="post-action hide-lg hide-md hide-sm">
      <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Chia sẻ bài viết này">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </a>
    </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://manhnv.com/post/huong-dan-xoa-database-khach-hang-dung-cach-va-cu-lua-thoi-dai-4.0/" title="Chia sẻ với Facebook" aria-label="Chia sẻ với Facebook">
          <i class="fab fa-facebook-square" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://manhnv.com/post/huong-dan-xoa-database-khach-hang-dung-cach-va-cu-lua-thoi-dai-4.0/" title="Chia sẻ với Twitter" aria-label="Chia sẻ với Twitter">
          <i class="fab fa-twitter" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/sharing/share-offsite/?url=https://manhnv.com/post/huong-dan-xoa-database-khach-hang-dung-cach-va-cu-lua-thoi-dai-4.0/" title="Chia sẻ với Linkedin" aria-label="Chia sẻ với Linkedin">
          <i class="fab fa-linkedin" aria-hidden="true"></i>
        </a>
      </li>
    
  
  
    <li class="post-action">
      <a class="post-action-btn btn btn--default" href="#disqus_thread" aria-label="Để lại một bình luận">
        <i class="far fa-comment"></i>
      </a>
    </li>
  
  <li class="post-action">
    
      <a class="post-action-btn btn btn--default" href="#top" aria-label="Trở lại đầu trang">
      <i class="fa fa-arrow-up" aria-hidden="true"></i>
    
    </a>
  </li>
</ul>
</div>


      </div>
      
<div id="share-options-bar" class="share-options-bar" data-behavior="5">
  <i id="btn-close-shareoptions" class="fa fa-times"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fmanhnv.com%2Fpost%2Fhuong-dan-xoa-database-khach-hang-dung-cach-va-cu-lua-thoi-dai-4.0%2F" aria-label="Chia sẻ với Facebook">
          <i class="fab fa-facebook-square" aria-hidden="true"></i><span>Chia sẻ với Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fmanhnv.com%2Fpost%2Fhuong-dan-xoa-database-khach-hang-dung-cach-va-cu-lua-thoi-dai-4.0%2F" aria-label="Chia sẻ với Twitter">
          <i class="fab fa-twitter" aria-hidden="true"></i><span>Chia sẻ với Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fmanhnv.com%2Fpost%2Fhuong-dan-xoa-database-khach-hang-dung-cach-va-cu-lua-thoi-dai-4.0%2F" aria-label="Chia sẻ với Linkedin">
          <i class="fab fa-linkedin" aria-hidden="true"></i><span>Chia sẻ với Linkedin</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>


    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-times"></i>
    </div>
    
      <img id="about-card-picture" src="https://manhnv.com/favicon.png" alt="Ảnh đại diện" />
    
    <h4 id="about-card-name">Manh NV</h4>
    
      <div id="about-card-bio">Chia sẻ là niềm vui</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Viết blog dạo
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker-alt"></i>
        <br/>
        VietNam
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://manhnv.com/images/cover-v1.2.0.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js" integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


<script src="https://manhnv.com/js/script-yqzy9wdlzix4lbbwdnzvwx3egsne77earqmn73v9uno8aupuph8wfguccut.min.js"></script>


  
    <script src="https://manhnv.com/js/scripts.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-gE8KAQyFIzV1C9+GZ8TKJHZS2s+n7EjNtC+IMRn1l5+WYJTHOODUM6JSjZhFhqXmc7bG8Av6XXpckA4tYhflnw==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/apache.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-EWROca+bote+7Oaaar1F6y74iZj1r1F9rm/ly7o+/FwJopbBaWtsFDmaKoZDd3QiGU2pGacBirHJNivmGLYrow==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/go.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-GDVzAn0wpx1yVtQsRWmFc6PhJiLBPdUic+h4GWgljBh904O3JU10fk9EKNpVyIoPqkFn54rgL2QBG4BmUTMpiQ==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/http.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-UgZlma8NzkrDb/NWgmLIcTrH7i/CSnLLDRFqCSNF5NGPpjKmzyM25qcoXGOup8+cDakKyaiTDd7N4dyH4YT+IA==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/less.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-lot9koe73sfXIrUvIPM/UEhuMciN56RPyBdOyZgfO53P2lkWyyXN7J+njcxIIBRV+nVDQeiWtiXg+bLAJZDTfg==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/nginx.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-Zd3e7XxHP00TD0Imr0PIfeM0fl0v95kMWuhyAS3Wn1UTSXTkz0OhtRgBAr4JlmADRgiXr4x7lpeUdqaGN8xIog==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/puppet.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-qtqDO052iXMSP+5d/aE/jMtL9vIIGvONgTJziC2K/ZIB1yEGa55WVxGE9/08rSQ62EoDifS9SWVGZ7ihSLhzMA==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/scss.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-1NmkjnEDnwwwcu28KoQF8vs3oaPFokQHbmbtwGhFfeDsQZtVFI8zW2aE9O8yMYdpdyKV/5blE4pSWw4Z/Sv97w==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/stylus.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-B2wSfruPjr8EJL6IIzQr1eAuDwrsfIfccNf/LCEdxELCgC/S/ZMt/Uvk80aD79m7IqOqW+Sw8nbkvha20yZpzg==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/swift.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-28oDiQZGKUVN6wQ7PSLPNipOcmkCALXKwOi7bnkyFf8QiMZQxG9EQoy/iiNx6Zxj2cG2SbVa4dXKigQhu7GiFw==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/yaml.min.js"></script>
  


<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>




    
  </body>
</html>

